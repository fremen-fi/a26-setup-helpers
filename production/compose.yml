services:
  radio-10:
    image: ghcr.io/mikasappi/radio-10:latest
    container_name: radio-10
    restart: unless-stopped

    volumes:
      # Audio content from CIFS (mounted on host via fstab)
      - /radio:/radio:ro
      - /radio-util:/radio-util:ro
      # HLS segments served by host Apache
      - /var/www/hls:/var/www/hls:rw
      # Liquidsoap socket (for telnet/monitoring access from host)
      - /run/liquidsoap:/run/liquidsoap:rw

    # Optional: override script path without rebuilding (hotfixes)
    # environment:
    #   LIQ_SCRIPT: /home/liq-user/Radio-10/script/prod.liq

    # Liquidsoap telnet port â€” bind to localhost only
    ports:
      - "127.0.0.1:1234:1234"

    # Prometheus exporter port (if liquidsoap exposes one)
    # - "127.0.0.1:9090:9090"

    logging:
      driver: journald
      options:
        tag: radio-10
